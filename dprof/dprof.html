<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<link href="dprof.css" rel="stylesheet">

<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
</head>

  <body>
<link rel="stylesheet" href="mathquill-0.10.1/mathquill-basic.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="mathquill-0.10.1/mathquill-basic.js"></script>
<script src="tokenizer/node_modules/mathjs/lib/browser/math.js"></script>
<script src="tokenizer/latex-mathjs-parser.js"></script>

<div class="main">
<p>This is a mockup for a derivative self-study tool. It is very much $\beta$. Or maybe $\gamma$.</p>

<ul>
<li> Enter familiar funtions ($\sin$, $\cos$, $\log$) just by typing their name.</li>
<li> For square roots, type <tt>sqrt</tt>.</li>
<li> For general radicals, like $\sqrt[3]{x}$, type <tt>nthroot</tt>.</li>
<li> The natural logarithm is <tt>ln</tt>.</li>
<li> An undecorated <tt>log</tt> is $\log_{10}$. Sorry.</li>
<li> To get a logarithm with a different base, use the the <tt>_</tt> key to get a subscript.</li>
</ul>

<label for="pet-select">Choose a problem set:</label>

<select id="select">
    <option value="">--Please choose an option--</option>
    <option value="problems.json">A Dummy Proficiency</option>
    <option value="OS-section3.1.json">OpenSTAX Section 3.3</option>
</select>

<hr>

<h2 id="set-label"></h2>
<div id="problem-set">
</div>

<script src="dprof.js"></script>
<script>

document.getElementById("select").addEventListener('change',
  function handleChange(event) {

  filename = event.target.value

  // Remove all previous problems
  problem_container = document.getElementById("problem-set")
  while (problem_container.firstChild) {
    problem_container.removeChild(problem_container.lastChild);
  }

  if( filename == "") {
    document.getElementById("set-label").innerHTML = ""    
    return
  }

  console.log("call JSON")

  $.getJSON("./" + filename )
   .success( function(problem_set) {
    console.log(problem_set)

    document.getElementById("set-label").innerHTML = problem_set.title
    problem_container = document.getElementById("problem-set")

    var p_list = []
    problems = problem_set.questions
    for (p in problems)  {
      dprob = new DProblem(document)
      p_list.push( dprob )
      problem_container.appendChild(dprob.element)
      dprob.setup(problems[p],p)
      problem_container.appendChild(document.createElement("hr"))
    }
  }).error( function(e) {
    console.log("error")
    console.log(e) 
  })
})






</script>

</div>
</body>
</html>